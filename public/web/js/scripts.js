var app=angular.module("betaBankApp",["ngRoute"]);app.config(["$routeProvider",function(o){o.when("/",{templateUrl:"/html/home.html",controller:"homeControl"}).when("/profile",{templateUrl:"/html/userprofile.html",controller:"profileControl"}).when("/map",{templateUrl:"/html/map.html",controller:"mapControl"})}]),app.controller("homeControl",["$scope","$http",function(o,e){console.log("home control")}]),app.controller("profileControl",["$scope","$http",function(o,e){console.log("profile control"),e.get("/api/user").then(function(e){e.data.user?(o.user=e.data.user,console.log(o.user)):window.location.href="/"}),o.showMe=function(){console.log(o.user)}}]),angular.module("betaBankApp").controller("mapControl",["$scope","$http","mapFactory",function(o,e,a){console.log("map control");var n=a.map();e.get("/api/locations").then(function(e){console.log(e.data),o.allLocations=e.data}),o.populateMarkers=function(){for(var e=0;e<o.allLocations.length;e++)marker=new google.maps.Marker({position:allLocations[e].position,map:n})},o.populateMarkers(),n.addListener("click",function(e){o.createMarker({lat:e.latLng.lat(),lng:e.latLng.lng()}),console.log(e.latLng.lat()),console.log(e.latLng.lng())}),o.createMarker=function(a){if(o.addNewLocation===!0){marker=new google.maps.Marker({position:a,map:n});var t={name:o.newLocationName,position:a};console.log("this is loc ",t),e.post("/api/locations",t).then(function(o){console.log(o.data)}),o.addNewLocation=!1,o.newLocationName=""}},o.createMarker({lat:40.0169753,lng:-105.2222925}),o.createMarker({lat:40.0169753,lng:-105.2122925}),o.createMarker({lat:40.04627736453682,lng:-105.18791198730469}),o.createMarker({lat:40.03812939078128,lng:-105.23735046386719}),o.addNewLocation=!1,o.locations={},o.newArea={},o.newProblem={},o.addArea=!0,o.addProblem=!0,o.currentModal="",o.setModal=function(e){o.currentModal=e},o.isModalSet=function(e){return o.currentModal===e},o.anyAreas=function(o){return 0!==o.areas.length},o.LocationCreate=function(e){this.name=e,this.areas=[],this.problems=[],o.locations[e]=this,console.log(o.locations)},o.makeALocation=function(e){new o.LocationCreate(e)},o.AreaCreate=function(e){o.locations[o.currentModal].areas.push(e),o.newArea={},console.log(o.locations)},o.makeAnArea=function(e){console.log("current modal "+e),new o.AreaCreate(e)},o.problemCreate=function(e,a,n,t){this.problem=e,this.grade=a,this.rating=n,this.area=t,o.locations[o.currentModal].problems.push({name:this.problem,grade:this.grade,rating:this.rating,area:this.area}),o.newProblem={}}}]),angular.module("betaBankApp").factory("mapFactory",[function(){var o=window.mapInit=function(){var o=new google.maps.Map(document.getElementById("map"),{center:{lat:40.0169753,lng:-105.2222925},zoom:12,mapTypeId:google.maps.MapTypeId.TERRAIN});return o};return{map:o}}]);