var app=angular.module("betaBankApp",["ngRoute"]);app.config(["$routeProvider",function(o){o.when("/",{templateUrl:"/html/home.html",controller:"homeControl"}).when("/profile",{templateUrl:"/html/userprofile.html",controller:"profileControl"}).when("/map",{templateUrl:"/html/map.html",controller:"mapControl"})}]),app.controller("homeControl",["$scope","$http",function(o,n){console.log("home control")}]),app.controller("profileControl",["$scope","$http",function(o,n){console.log("profile control"),n.get("/api/user").then(function(n){n.data.user?(o.user=n.data.user,console.log(o.user)):window.location.href="/"}),o.showMe=function(){console.log(o.user)}}]),angular.module("betaBankApp").controller("mapControl",["$scope","$http","mapFactory",function(o,n,a){console.log("map control");var e=a.map();n.get("/api/locations").then(function(n){o.allLocations=n.data,console.log(o.allLocations),console.log(o.allLocations.length);for(var a=0;a<o.allLocations.length;a++){var l=new google.maps.Marker({position:o.allLocations[a].position,map:e,name:o.allLocations[a].name});l.addListener("click",function(){o.setModal(this.name),console.log(o.currentModal)})}}),e.addListener("click",function(n){o.createMarker({lat:n.latLng.lat(),lng:n.latLng.lng()})}),o.addNewLocation=!1,o.newLocationName="",o.createMarker=function(a){if(o.addNewLocation===!0&&""!=o.newLocationName){marker=new google.maps.Marker({position:a,map:e,name:o.newLocationName}),marker.addListener("click",function(){o.setModal(marker.name),console.log(o.currentModal)});var l={name:o.newLocationName,position:a};void 0!=l.position&&(console.log("this is loc ",l),n.post("/api/locations",l).then(function(o){console.log(o.data)})),o.addNewLocation=!1,o.newLocationName=""}},o.makeNewWall=function(a){var e={locationId:a.id,name:a.name};console.log("newWall ",e),n.post("/api/walls",e).then(function(n){o.locationWalls=n})},o.makeNewProblem=function(o){var a={locationId:o.id,name:o.name,grade:o.grade,rating:o.rating,wall:o.wall};console.log("newProblems ",a),n.post("/api/problems",a).then(function(o){console.log(o.data)})},o.addWall=!0,o.addProblem=!0,o.currentModal="",o.setModal=function(n){o.currentModal=n},o.isModalSet=function(n){return o.currentModal===n}}]),angular.module("betaBankApp").factory("mapFactory",[function(){var o=window.mapInit=function(){var o=new google.maps.Map(document.getElementById("map"),{center:{lat:40.0169753,lng:-105.2222925},zoom:12,mapTypeId:google.maps.MapTypeId.TERRAIN});return o};return{map:o}}]);