var app=angular.module("betaBankApp",["ngRoute"]);app.config(["$routeProvider",function(o){o.when("/",{templateUrl:"/html/home.html",controller:"homeControl"}).when("/profile",{templateUrl:"/html/userprofile.html",controller:"profileControl"}).when("/map",{templateUrl:"/html/map.html",controller:"mapControl"})}]),app.controller("homeControl",["$scope","$http",function(o,e){console.log("home control"),o.needToSignUp=!1,o.alreadySignedIn=!1,e.get("/api/user").then(function(e){e.data.user||(o.alreadySignedIn=!0)})}]),app.controller("profileControl",["$scope","$http",function(o,e){console.log("profile control"),e.get("/api/user").then(function(e){e.data.user?(o.user=e.data.user,console.log("user ",o.user)):window.location.href="/"}),o.showMe=function(){console.log(o.user)}}]),angular.module("betaBankApp").controller("mapControl",["$scope","$http","mapFactory",function(o,e,n){e.get("/api/user").then(function(e){e.data.user?(o.user=e.data.user,console.log(o.user)):window.location.href="/"}),console.log("map control");var a=n.map();e.get("/api/locations").then(function(e){o.allLocations=e.data,console.log(o.allLocations),console.log(o.allLocations.length);for(var n=0;n<o.allLocations.length;n++){var l=new google.maps.Marker({position:o.allLocations[n].position,map:a,name:o.allLocations[n].name});l.addListener("click",function(){o.setModal(this.name),console.log(o.currentModal)})}}),a.addListener("click",function(e){o.createMarker({lat:e.latLng.lat(),lng:e.latLng.lng()})}),o.addNewLocation=!1,o.newLocationName="",o.createMarker=function(n){if(o.addNewLocation===!0&&""!=o.newLocationName){marker=new google.maps.Marker({position:n,map:a,name:o.newLocationName}),marker.addListener("click",function(){o.setModal(marker.name),console.log(o.currentModal)});var l={name:o.newLocationName,position:n};void 0!=l.position&&(console.log("this is loc ",l),e.post("/api/locations",l).then(function(o){console.log(o.data)})),o.addNewLocation=!1,o.newLocationName=""}},o.makeNewWall=function(n){var a={locationId:n.id,name:n.name};console.log("newWall ",a),e.post("/api/walls",a).then(function(e){o.locationWalls=e})},o.makeNewProblem=function(o){var n={locationId:o.id,name:o.name,grade:o.grade,rating:o.rating,wall:o.wall};console.log("newProblems ",n),e.post("/api/problems",n).then(function(o){console.log(o.data)})},o.pushCC=function(o){console.log(o);var n={locationId:o.id,wallName:o.wallName,problemName:o.problemName};e.post("/api/completedClimbs",n)},o.addWall=!0,o.addProblem=!0,o.currentModal="",o.setModal=function(e){o.currentModal=e},o.isModalSet=function(e){return o.currentModal===e}}]),angular.module("betaBankApp").factory("mapFactory",[function(){var o=window.mapInit=function(){var o=new google.maps.Map(document.getElementById("map"),{center:{lat:40.0169753,lng:-105.2222925},zoom:12,mapTypeId:google.maps.MapTypeId.TERRAIN});return o};return{map:o}}]);