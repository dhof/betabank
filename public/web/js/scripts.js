var app=angular.module("betaBankApp",["ngRoute"]);app.config(["$routeProvider",function(o){o.when("/",{templateUrl:"/html/home.html",controller:"homeControl"}).when("/profile",{templateUrl:"/html/userprofile.html",controller:"profileControl"}).when("/map",{templateUrl:"/html/map.html",controller:"mapControl"})}]),app.controller("homeControl",["$scope","$http",function(o,e){console.log("home control")}]),app.controller("profileControl",["$scope","$http",function(o,e){console.log("profile control"),e.get("/api/user").then(function(e){e.data.user?(o.user=e.data.user,console.log(o.user)):window.location.href="/"}),o.showMe=function(){console.log(o.user)}}]),angular.module("betaBankApp").controller("mapControl",["$scope","$http","mapFactory",function(o,e,n){console.log("map control");var a=n.map();e.get("/api/locations").then(function(e){o.allLocations=e.data,console.log(o.allLocations),console.log(o.allLocations.length);for(var n=0;n<o.allLocations.length;n++){var t=new google.maps.Marker({position:o.allLocations[n].position,map:a,name:o.allLocations[n].name});t.addListener("click",function(){o.setModal(this.name),console.log(o.currentModal)})}}),a.addListener("click",function(e){o.createMarker({lat:e.latLng.lat(),lng:e.latLng.lng()})}),o.addNewLocation=!1,o.newLocationName="",o.createMarker=function(n){if(o.addNewLocation===!0&&""!=o.newLocationName){marker=new google.maps.Marker({position:n,map:a,name:o.newLocationName}),marker.addListener("click",function(){o.setModal(marker.name),console.log(o.currentModal)});var t={name:o.newLocationName,position:n};void 0!=t.position&&(console.log("this is loc ",t),e.post("/api/locations",t).then(function(o){console.log(o.data)})),o.addNewLocation=!1,o.newLocationName=""}},o.locations={},o.newArea={},o.newProblem={},o.addArea=!0,o.addProblem=!0,o.currentModal="",o.setModal=function(e){o.currentModal=e},o.isModalSet=function(e){return o.currentModal===e},o.anyAreas=function(o){return 0!==o.areas.length},o.AreaCreate=function(e){o.locations[o.currentModal].areas.push(e),o.newArea={},console.log(o.locations)},o.makeAnArea=function(e){console.log("current modal "+e),new o.AreaCreate(e)},o.problemCreate=function(e,n,a,t){this.problem=e,this.grade=n,this.rating=a,this.area=t,o.locations[o.currentModal].problems.push({name:this.problem,grade:this.grade,rating:this.rating,area:this.area}),o.newProblem={}}}]),angular.module("betaBankApp").factory("mapFactory",[function(){var o=window.mapInit=function(){var o=new google.maps.Map(document.getElementById("map"),{center:{lat:40.0169753,lng:-105.2222925},zoom:12,mapTypeId:google.maps.MapTypeId.TERRAIN});return o};return{map:o}}]);