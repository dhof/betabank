var app=angular.module("betaBankApp",["ngRoute"]);app.config(["$routeProvider",function(o){o.when("/",{templateUrl:"/html/home.html",controller:"homeControl"}).when("/profile",{templateUrl:"/html/userprofile.html",controller:"profileControl"}).when("/map",{templateUrl:"/html/map.html",controller:"mapControl"})}]),app.controller("homeControl",["$scope","$http",function(o,a){console.log("home control"),o.needToSignUp=!1,o.alreadySignedIn=!1,a.get("/api/user").then(function(a){a.data.user||(o.alreadySignedIn=!0)})}]),app.controller("profileControl",["$scope","$http",function(o,a){console.log("profile control"),a.get("/api/user").then(function(a){a.data.user?(o.user=a.data.user,console.log("user ",o.user)):window.location.href="/"}),o.showMe=function(){console.log(o.user)}}]),angular.module("betaBankApp").controller("mapControl",["$scope","$http","mapFactory",function(o,a,n){a.get("/api/user").then(function(a){a.data.user?(o.user=a.data.user,console.log(o.user)):window.location.href="/"}),console.log("map control");var e=n.map();a.get("/api/locations").then(function(a){o.allLocations=a.data,console.log(o.allLocations),console.log(o.allLocations.length);for(var n=0;n<o.allLocations.length;n++){var t=new google.maps.Marker({position:o.allLocations[n].position,map:e,name:o.allLocations[n].name});t.addListener("click",function(){o.setModal(this.name),console.log(o.currentModal)})}}),e.addListener("click",function(a){o.createMarker({lat:a.latLng.lat(),lng:a.latLng.lng()})}),o.addNewLocation=!1,o.newLocationName="",o.createMarker=function(n){if(o.addNewLocation===!0&&""!=o.newLocationName){marker=new google.maps.Marker({position:n,map:e,name:o.newLocationName}),marker.addListener("click",function(){o.setModal(marker.name),console.log(o.currentModal)});var t={name:o.newLocationName,position:n};void 0!=t.position&&(console.log("this is loc ",t),a.post("/api/locations",t).then(function(o){console.log(o.data)})),a.get("/api/locations").then(function(a){o.allLocations=a.data}),o.addNewLocation=!1,o.newLocationName=""}},o.makeNewWall=function(n){var e={locationId:n.id,name:n.name};console.log("newWall ",e),a.post("/api/walls",e).then(function(a){o.locationWalls=a}),a.get("/api/locations").then(function(a){o.allLocations=a.data}),o.newProblem={}},o.makeNewProblem=function(n){var e={locationId:n.id,name:n.name,grade:n.grade,rating:n.rating,wall:n.wall};console.log("newProblems ",e),a.post("/api/problems",e).then(function(o){console.log(o.data)}),a.get("/api/locations").then(function(a){o.allLocations=a.data}),o.newProblem={}},o.pushCC=function(o){console.log(o);var n={locationId:o.id,locationName:o.locationName,wallName:o.wallName,problemName:o.problemName,grade:o.grade};a.post("/api/completedClimbs",n)},o.addWall=!0,o.addProblem=!0,o.currentModal="",o.setModal=function(a){o.currentModal=a},o.isModalSet=function(a){return o.currentModal===a}}]),angular.module("betaBankApp").factory("mapFactory",[function(){var o=window.mapInit=function(){var o=new google.maps.Map(document.getElementById("map"),{center:{lat:40.0169753,lng:-105.2222925},zoom:12,mapTypeId:google.maps.MapTypeId.TERRAIN});return o};return{map:o}}]);